# é”šç‚¹ï¼šå®šä¹‰é€šç”¨çš„èŠ‚ç‚¹é€‰æ‹©é€»è¾‘
Common_Group: &é€šç”¨èŠ‚ç‚¹é€‰æ‹©
  type: select
  proxies: [ğŸŸ¢ ç›´è¿, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸ–²ï¸ æ‰‹åŠ¨åˆ‡æ¢, ğŸ›« å†·é—¨èŠ‚ç‚¹, ğŸ—¼ å®¶å®½æ¸¸æˆ]

# é”šç‚¹ï¼šå®šä¹‰è§„åˆ™é›†çš„é€šç”¨é…ç½®
Rule_Provider_Common: &è§„åˆ™é›†é…ç½®
  type: http
  format: yaml
  interval: 86400
  behavior: classical
  path: ./rules/

##############################################
# ğŸŸ¢ è®¢é˜…åŒºåŸŸ
proxy-providers:
  User_Sub:
    type: http
    interval: 86400
    health-check: {enable: true, url: 'https://edge.microsoft.com/captiveportal/generate_204', interval: 300}
    # æ›¿æ¢ä¸‹é¢çš„é“¾æ¥ä¸ºä½ è‡ªå·±çš„æœºåœºè®¢é˜…é“¾æ¥
    url: "https://ä½ çš„è®¢é˜…é“¾æ¥"
    path: ./proxies/airport.yaml
    override:
      additional-prefix: '[æœºåœºåå­—]'
      skip-cert-verify: true
      udp: true
 
##############################################
# âš™ï¸ åŸºç¡€è®¾ç½®
mode: rule
ipv6: true
log-level: info
allow-lan: true
mixed-port: 7890
unified-delay: true
tcp-concurrent: true
global-client-fingerprint: chrome
keep-alive-interval: 30

# åœ°ç†æ•°æ®åº“è®¾ç½®
geodata-mode: true
geodata-loader: standard
geo-auto-update: true
geo-update-interval: 48
geox-url:
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.metadb"
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"

# æµé‡å—…æ¢ (è§£å†³éƒ¨åˆ†åº”ç”¨æ— æ³•åˆ†æµçš„é—®é¢˜)
sniffer:
  enable: true
  sniff:
    HTTP: {ports: [80, 8080-8880], override-destination: true}
    TLS: {ports: [443, 8443]}
    QUIC: {ports: [443, 8443]}
  skip-domain: ["Mijia Cloud", "+.push.apple.com", "+.apple.com", "+.wechat.com", "+.qq.com"]

# Tun æ¨¡å¼ (è™šæ‹Ÿç½‘å¡)
tun:
  enable: true
  stack: system
  mtu: 9000
  dns-hijack: ["any:53", "tcp://any:53"]
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true

# DNS è®¾ç½® (Fake-IP æ¨¡å¼ï¼Œé˜²æ­¢ DNS æ±¡æŸ“)
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: true
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter: ["+.lan", "+.local", "geosite:cn"]
  default-nameserver: [223.5.5.5, 119.29.29.29]
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query

proxies:
  - name: "ğŸŸ¢ ç›´è¿"
    type: direct
    udp: true
  - name: "ğŸš« æ‹’ç»"
    type: reject

##############################################
# ğŸš€ ç­–ç•¥ç»„
proxy-groups:
  # === ä¸»è¦åŠŸèƒ½å…¥å£ ===
  - name: ğŸŒ å…¨çƒåŠ é€Ÿ
    <<: *é€šç”¨èŠ‚ç‚¹é€‰æ‹©
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/global.png"

  - name: ğŸ“º å›½é™…åª’ä½“
    <<: *é€šç”¨èŠ‚ç‚¹é€‰æ‹©
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/global_media.png"

  - name: ğŸ¥ æ¸¯å°ç•ªå‰§
    <<: *é€šç”¨èŠ‚ç‚¹é€‰æ‹©
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/bilibilit.png"

  - name: ğŸ® æ¸¸æˆå¹³å°
    <<: *é€šç”¨èŠ‚ç‚¹é€‰æ‹©
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/game.png"

  - name: âœ¨ AIå¹³å°
    <<: *é€šç”¨èŠ‚ç‚¹é€‰æ‹©
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/ai.png"

  - name: ğŸ è‹¹æœæœåŠ¡
    <<: *é€šç”¨èŠ‚ç‚¹é€‰æ‹©
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/apple.png"

  - name: â“‚ï¸ å¾®è½¯æœåŠ¡
    <<: *é€šç”¨èŠ‚ç‚¹é€‰æ‹©
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/microsoft.png"

  - name: ğŸ¯ å…¨çƒç›´è¿
    type: select
    proxies: [ğŸŸ¢ ç›´è¿, ğŸ–²ï¸ æ‰‹åŠ¨åˆ‡æ¢]
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/direct.png"

  # === è‡ªåŠ¨æµ‹é€Ÿä¸ç­›é€‰ç»„ ===
  
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: url-test
    use: [User_Sub]
    tolerance: 50
    interval: 300
    filter: "(?i)(æ¸¯|HK|Hong|Kong|[0.2x])"
    exclude-filter: "(?i)(æ¸¸æˆ|å¤§é¢ç§¯|å®¶å®½|ä¸‹è½½ä¸“ç”¨|ä»…é™æ¸¸æˆä½¿ç”¨|[2x]|[x2]|IEPL|IPLC|home|Std|Pre|CM|CT|Mobile|Starlink)"
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/Hongkong.png"

  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    type: url-test
    use: [User_Sub]
    tolerance: 50
    interval: 300
    filter: "(?i)(å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan|[0.2x])"
    exclude-filter: "(?i)(æ¸¸æˆ|å¤§é¢ç§¯|å®¶å®½|ä¸‹è½½ä¸“ç”¨|ä»…é™æ¸¸æˆä½¿ç”¨|[2x]|[x2]|IEPL|IPLC|home|Std|Pre|CM|CT|Mobile|Starlink)"
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/Taiwan_China.png"

  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
    type: url-test
    use: [User_Sub]
    tolerance: 50
    interval: 300
    filter: "(?i)(æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore|[0.2x])"
    exclude-filter: "(?i)(æ¸¸æˆ|å¤§é¢ç§¯|å®¶å®½|ä¸‹è½½ä¸“ç”¨|ä»…é™æ¸¸æˆä½¿ç”¨|[2x]|[x2]|IEPL|IPLC|home|Std|Pre|CM|CT|Mobile|Starlink)"
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/Singapore.png"

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    use: [User_Sub]
    tolerance: 50
    interval: 300
    filter: "(?i)(æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|æ—¥|JP|Japan|[0.2x])"
    exclude-filter: "(?i)(å°¼æ—¥|æ¸¸æˆ|å¤§é¢ç§¯|å®¶å®½|ä¸‹è½½ä¸“ç”¨|ä»…é™æ¸¸æˆä½¿ç”¨|[2x]|[x2]|IEPL|IPLC|home|Std|Pre|CM|CT|Mobile|Starlink)"
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/Japan.png"

  - name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹
    type: url-test
    use: [User_Sub]
    tolerance: 150
    interval: 300
    filter: "(?i)(ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States|[0.2x])"
    exclude-filter: "(?i)(æ¸¸æˆ|å¤§é¢ç§¯|å®¶å®½|ä¸‹è½½ä¸“ç”¨|ä»…é™æ¸¸æˆä½¿ç”¨|[2x]|[x2]|IEPL|IPLC|home|Std|Pre|CM|CT|Mobile|Starlink)"
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/America.png"

  - name: ğŸ–²ï¸ æ‰‹åŠ¨åˆ‡æ¢
    type: select
    use: [User_Sub]
    # æ­£åˆ™ï¼šä¿ç•™å¸¸è§åœ°åŒºï¼Œæ’é™¤é«˜å€ç‡/ç‰¹æ®ŠèŠ‚ç‚¹
    filter: "(?i)(ä½å€ç‡|é¦™æ¸¯|æ—¥æœ¬|æ–°åŠ å¡|ç¾å›½|å°æ¹¾|HK|JP|SG|US|TW|[0.2x])"
    exclude-filter: "(?i)(æ¸¸æˆ|å¤§é¢ç§¯|å®¶å®½|ä¸‹è½½ä¸“ç”¨|ä»…é™æ¸¸æˆä½¿ç”¨|[2x]|x2|IEPL|IPLC|home|Std|Pre|CM|CT|Mobile|Starlink)"
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/select.png"

  - name: ğŸ—¼ å®¶å®½æ¸¸æˆ
    type: select
    use: [User_Sub]
    # æ­£åˆ™ï¼šä¸“é—¨ç­›é€‰ æ¸¸æˆã€å®¶å®½ã€IPLC ç­‰é«˜è´¨é‡èŠ‚ç‚¹
    filter: "(?i)(æ¸¸æˆ|å¤§é¢ç§¯|å®¶å®½|ä¸‹è½½ä¸“ç”¨|ä»…é™æ¸¸æˆä½¿ç”¨|[2x]|[x2]|IEPL|IPLC|home|Std|Pre|CM|CT|Mobile|Starlink)"
    exclude-filter: "(?i)(ä½å€ç‡|[0.2x])"
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/game.png"

  - name: ğŸ›« å†·é—¨èŠ‚ç‚¹
    type: select
    use: [User_Sub]
    # æ­£åˆ™ï¼šæ’é™¤ä»¥ä¸Šäº”å¤§å¸¸è§åœ°åŒºï¼Œå‰©ä¸‹çš„å°±æ˜¯å†·é—¨èŠ‚ç‚¹
    exclude-filter: "(?i)(æ¸¸æˆ|Direct|Reject|è¯·æ¯å¤©æ›´æ–°ä¸€æ¬¡|ç›´æ¥è¿æ¥|æ‹’ç»|å¤§é¢ç§¯èŠ‚ç‚¹|æ¸¯|HK|Hong|Kong|å°|æ–°åŒ—|å½°åŒ–|TW|Taiwan|æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore|æ—¥æœ¬|æ—¥æœ|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|JP|Japan|ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States)"
    icon: "https://raw.githubusercontent.com/Lanlan13-14/Rules/refs/heads/main/icon/airplane.png"
 
##############################################
# ğŸ“¡ è§„åˆ™é›† (è¿œç¨‹å¼•ç”¨)
rule-providers: 
  GangTai_Bili: 
    <<: *è§„åˆ™é›†é…ç½®
    url: "https://raw.githubusercontent.com/zt001110/me/master/rule/gangaobili.list"

  Game_List:
    <<: *è§„åˆ™é›†é…ç½®
    url: "https://raw.githubusercontent.com/zt001110/me/master/rule/Game.list"

  AI_List:
    <<: *è§„åˆ™é›†é…ç½®
    url: "https://raw.githubusercontent.com/zt001110/me/master/rule/AI.list"

  Global_Media:
    <<: *è§„åˆ™é›†é…ç½®
    url: "https://raw.githubusercontent.com/zt001110/me/master/rule/GlobalMedia.list"

  Microsoft_List:
    <<: *è§„åˆ™é›†é…ç½®
    url: "https://raw.githubusercontent.com/zt001110/me/master/rule/Microsoft.list"

  Apple_List:
    <<: *è§„åˆ™é›†é…ç½®
    url: "https://raw.githubusercontent.com/zt001110/me/master/rule/apple.list"

  Global_Accelerate:
    <<: *è§„åˆ™é›†é…ç½®
    url: "https://cdn.jsdelivr.net/gh/zt001110/me@master/rule/Global.list"

  # === ç›´è¿è§„åˆ™é›† (åˆ†å¼€å®šä¹‰ä»¥ä¿è¯å®Œæ•´æ€§) ===
  Direct_Zhilian:
    <<: *è§„åˆ™é›†é…ç½®
    url: "https://cdn.jsdelivr.net/gh/zt001110/me@master/rule/zhilian.list"
  Direct_Chinese:
    <<: *è§„åˆ™é›†é…ç½®
    url: "https://cdn.jsdelivr.net/gh/zt001110/me@master/rule/chinese.list"
  Direct_ChineseMedia:
    <<: *è§„åˆ™é›†é…ç½®
    url: "https://cdn.jsdelivr.net/gh/zt001110/me@master/rule/chineseMedia.list"
  Direct_CnLan:
    <<: *è§„åˆ™é›†é…ç½®
    url: "https://cdn.jsdelivr.net/gh/zt001110/me@master/rule/cnlan.list"
  Direct_CompanyIP:
    <<: *è§„åˆ™é›†é…ç½®
    url: "https://cdn.jsdelivr.net/gh/zt001110/me@master/rule/ChinaCompanyIp.list"
  Direct_ChinaIP:
    <<: *è§„åˆ™é›†é…ç½®
    url: "https://cdn.jsdelivr.net/gh/zt001110/me@master/rule/ChinaIp.list"

##############################################
# ğŸš¦ è§„åˆ™åŒ¹é…
rules:
  # ç‰¹æ®Šåˆ†æµ
  - RULE-SET,GangTai_Bili,ğŸ¥ æ¸¯å°ç•ªå‰§
  - RULE-SET,Game_List,ğŸ® æ¸¸æˆå¹³å°
  - RULE-SET,AI_List,âœ¨ AIå¹³å°
  - RULE-SET,Global_Media,ğŸ“º å›½é™…åª’ä½“
  - RULE-SET,Microsoft_List,â“‚ï¸ å¾®è½¯æœåŠ¡
  - RULE-SET,Apple_List,ğŸ è‹¹æœæœåŠ¡

  # ç›´è¿è§„åˆ™ (åˆå¹¶æ‰€æœ‰ç›´è¿é›†)
  - RULE-SET,Direct_Zhilian,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,Direct_Chinese,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,Direct_ChineseMedia,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,Direct_CnLan,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,Direct_CompanyIP,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,Direct_ChinaIP,ğŸ¯ å…¨çƒç›´è¿
  
  # GEOIP è§„åˆ™
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿
  
  # å…¨çƒåŠ é€Ÿ (å…œåº•å‰åŒ¹é…)
  - RULE-SET,Global_Accelerate,ğŸŒ å…¨çƒåŠ é€Ÿ

  # æœ€ç»ˆå…œåº•
  - MATCH,ğŸŒ å…¨çƒåŠ é€Ÿ
